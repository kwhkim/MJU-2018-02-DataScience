# HBE01239: 응용데이터사이언스(5733)

* 담당교수 : 김권현

* 강의시간 : 금요일 오후 1:30 - 4:15

* 강의장소 : S1353

* 상담시간 : 금요일 수업 전후(이메일로 사전 약속 필요)

* 선수과목 : R통계분석

## 교과목 개요

'R통계분석'에 기초하여 상위 과정의 R 사용법과 프로그래밍 능력을 배양한다. 

## 성적평가방법

출석(20), 과제물/보고서(20), 수시시험 및 중간고사(20), 학기말시험(20), 발표(20)

## 과제 및 수업 관련 관련 R Markdown 및 Github 운영

* 수업자료 및 과제는 R Markdown을 활용함을 기본으로 한다.

* 수강생은 자신의 github id를 만들고, 수업 레포지토리를 fork해서 자신의 레포지토리를 운영한다. 과제 등을 자신의 repository(자신만의 폴더)에 commit-push한 후, pull request를 넣어서 수업 레포지토리에 합친다(merge).

## 강의 계획

|주   |날짜   |내용   |
|:-:|:-:|---|
|01   |09/07   |(개교기념일 휴강)   |
|02   |09/14   |[과목 소개, git 설치, github 등](https://htmlpreview.github.io/?https://github.com/kwhkim/MJU-2018-02-DataScience/blob/master/00_Instructor/2018_09_12.html)  |
|03 |09/21   |[R의 데이터 타입](https://github.com/kwhkim/stat-programming-01/blob/master/RClass02_.pdf), [R 마크다운](https://htmlpreview.github.io/?https://github.com/kwhkim/MJU-2018-02-DataScience/blob/master/00_Instructor/Class02_RMarkdown.html)   |
|[04](./Class03.html)   |09/28   |[데이터 읽어오기](https://htmlpreview.github.io/?https://github.com/kwhkim/MJU-2018-02-DataScience/blob/master/00_Instructor/Class02_ImportingData.html), [데이터 살펴보기](https://htmlpreview.github.io/?https://github.com/kwhkim/MJU-2018-02-DataScience/blob/master/00_Instructor/Class03.html)  |
|05   |10/05   |[집단별 함수 적용](https://htmlpreview.github.io/?https://github.com/kwhkim/MJU-2018-02-DataScience/blob/master/00_Instructor/Class04.html)   |
|06   |10/12   |[`dplyr`/`join`/`tidyr` 활용](https://htmlpreview.github.io/?https://github.com/kwhkim/MJU-2018-02-DataScience/blob/master/00_Instructor/Class05.html)   |
|07   |10/19   |[R 그래픽스](https://htmlpreview.github.io/?https://github.com/kwhkim/MJU-2018-02-DataScience/blob/master/00_Instructor/W07_ggplot2/ggplot2.html)   |
|08   |10/26   |[R 프로그래밍](https://github.com/kwhkim/MJU-2018-02-DataScience/blob/master/00_Instructor/control_and_functions.pdf)   |
|09   |11/02   |중간고사   |
|10   |11/09   |선형 회귀 모형   |
|11   |11/16   |일반화 선형 모형, 혼합모형   |
|12   |11/23   |주성분분석, 요인분석, 문항반응이론   |
|13   |11/30   |경로분석, 구조방정식모형   |
|14   |12/07   |텍스트 마이닝   |
|15   |12/14   |기말고사   |
|16   |12/21   |프로젝트 발표   |

## 과제 채점

|순번|과제1(9/21)|과제2(9/29)|과제3   |과제4   |과제5   |과제6   |  |
|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
|01   |3   |   |   |   |   |   |   |
|02   |3   |   |   |   |   |   |   |
|03   |3   |   |   |   |   |   |   |
|04   |3   |   |   |   |   |   |   |
|05   |3   |   |   |   |   |   |   |
|06   |   |   |   |   |   |   |   |
|07   |3   |   |   |   |   |   |   |
|08   |   |   |   |   |   |   |   |
|09   |3   |   |   |   |   |   |   |
|10  |   |   |   |   |   |   |   |
|11   |3   |   |   |   |   |   |   |
|12   |3   |   |   |   |   |   |   |
|13   |3   |   |   |   |   |   |   |
|14   |3   |   |   |   |   |   |   |
|15   |3   |   |   |   |   |   |   |
|16   |   |   |   |   |   |   |   |
|17   |3   |   |   |   |   |   |   |
|18   |3   |   |   |   |   |   |   |
|19   |3   |   |   |   |   |   |   |
|20   |3   |   |   |   |   |   |   |
|21   |   |   |   |   |   |   |   |
|22   |3   |   |   |   |   |   |   |
|23   |3   |   |   |   |   |   |   |
|24   |3   |   |   |   |   |   |   |
|25   |3   |   |   |   |   |   |   |
|26   |   |   |   |   |   |   |   |
|27   |3   |   |   |   |   |   |   |
|28   |2  |   |   |   |   |   |   |
|29   |   |   |   |   |   |   |   |
|30   |3   |   |   |   |   |   |   |
|31   |3   |   |   |   |   |   |   |
|32   |3   |   |   |   |   |   |   |
|33   |   |   |   |   |   |   |   |
|34   |   |   |   |   |   |   |   |
|35   |3   |   |   |   |   |   |   |
|36   |3   |   |   |   |   |   |   | 

### **과제1(9/21)**
- 많은 주제가 흥미로웠습니다.
- 데이터를 통해 새로운 지식을 창출하거나 가설을 뒷받침하기 위해서 어떤 분석 방법을 쓸 수 있을지 생각해보세요.
- 특히 데이터가 엄청나게 많지 않은 이상 데이터 분석을 위해서 관련 분야의 지식(domain knowledge)가 중요한 역할을 합니다.

- 아이디가 yeongbi인 학생은 "자신의 순번_이름"의 폴더를 만든 후 그 폴더 안에 과제를 제출하세요.
- 순번 10번 학생은 내용이 없습니다. 내용을 확인 후 다음 수업 전까지 과제를 제출하세요.
- 순번 16번 학생은 pull request를 close했는데, 과제를 .txt 화일로 만들어서 다시 제출하기 바랍니다.

### **과제 2(9/28) 채점**
- 모두 수고했습니다.
- 신정민, 이도휘, 황수민, 장민지 학생은 과제를 자신의 "순번_이름"의 폴더 안에 저장하기 바랍니다.
- 과제 제출 시에는 R Markdown, Including plots 등 과제와 상관없는 내용은 삭제하세요.
- 데이터 화일이 클 때에는 데이터 화일을 샘플링해서 저장하길 바랍니다.
- 아래는 부분채점표입니다. 부분 점수 1점은 총점에서 0.5점입니다.

| 순번 	|   	| 데이터 출처와 링크 	| 사진 포함 	| 나열 	|   	|   	| 분석 방향 	| 총점 	|
|------	|---	|--------------------	|-----------	|------	|---	|---	|-----------	|------	|
| 1    	|   	| 1                  	| 1         	| 1    	|   	|   	| 1         	| 3    	|
| 2    	|   	|                    	|           	|      	|   	|   	|           	| 1    	|
| 3    	|   	|                    	|           	|      	|   	|   	|           	| 1    	|
| 4    	|   	|                    	|           	|      	|   	|   	|           	| 1    	|
| 5    	|   	| 1                  	| 1         	| 1    	|   	|   	| 1         	| 3    	|
| 6    	|   	|                    	|           	|      	|   	|   	|           	| 1    	|
| 7    	|   	| 1                  	| 1         	| 1    	|   	|   	| 1         	| 3    	|
| 8    	|   	|                    	|           	|      	|   	|   	|           	| 1    	|
| 9    	|   	| 1                  	| 0         	| 1    	|   	|   	| 1         	| 2.5  	|
| 10   	|   	|                    	|           	|      	|   	|   	|           	| 1    	|
| 11   	|   	| 1                  	| 1         	| 1    	|   	|   	| 1         	| 3    	|
| 12   	|   	|                    	|           	|      	|   	|   	|           	| 1    	|
| 13   	|   	| 1                  	| 1         	| 1    	|   	|   	| 1         	| 3    	|
| 14   	|   	| 1                  	| 1         	| 1    	|   	|   	| 1         	| 3    	|
| 15   	|   	| 1                  	| 1         	| 1    	|   	|   	| 1         	| 3    	|
| 16   	|   	|                    	|           	|      	|   	|   	|           	| 1    	|
| 17   	|   	| 1                  	| 1         	| 1    	|   	|   	| 1         	| 3    	|
| 18   	|   	|                    	|           	|      	|   	|   	|           	| 1    	|
| 19   	|   	| 1                  	| 1         	| 1    	|   	|   	| 1         	| 3    	|
| 20   	|   	|                    	|           	|      	|   	|   	|           	| 1    	|
| 21   	|   	|                    	|           	|      	|   	|   	|           	| 1    	|
| 22   	|   	|                    	|           	|      	|   	|   	|           	| 1    	|
| 23   	|   	| 1                  	| 1         	| 1    	|   	|   	| 1         	| 3    	|
| 24   	|   	|                    	|           	|      	|   	|   	|           	| 1    	|
| 25   	|   	| 1                  	| 1         	| 1    	|   	|   	| 1         	| 3    	|
| 26   	|   	|                    	|           	|      	|   	|   	|           	| 1    	|
| 27   	|   	| 1                  	| 1         	| 1    	|   	|   	| 1         	| 3    	|
| 28   	|   	| 1                  	| 1         	| 1    	|   	|   	| 1         	| 3    	|
| 29   	|   	|                    	|           	|      	|   	|   	|           	| 1    	|
| 30   	|   	| 1                  	| 1         	| 1    	|   	|   	| 1         	| 3    	|
| 31   	|   	| 1                  	| 1         	| 0    	|   	|   	| 1         	| 2.5  	|
| 32   	|   	| 1                  	| 0         	| 1    	|   	|   	| 1         	| 2.5  	|
| 33   	|   	|                    	|           	|      	|   	|   	|           	| 1    	|
| 34   	|   	| 1                  	| 1         	| 1    	|   	|   	| 1         	| 3    	|
| 35   	|   	| 1                  	| 1         	| 0    	|   	|   	| 1         	| 2.5  	|
| 36   	|   	| 1                  	| 1         	| 1    	|   	|   	| 1         	| 3    	|

## **과제 3(10/19) 채점**
* 과제 제출시 유의사항
    - 과제 제출시에는 .rmd 화일을 Knit해서 .html을 만들 수 있도록 하세요.
    - 화일은 저장을 하던지, internet에서 바로 읽을 수 있도록 하세요.
    - 너무 큰 화일은 인터넷에서 바로 읽을 수 있습니다. 이때 .gitignore 화일에 화일을 추가하여 commit이나 push되는 것을 막을 수 있습니다.
* 과제 관련
    - summarise(요약) 함수는 여러 개의 행을 하나의 행으로 줄이기 위해 사용됩니다. 예. `df %>% summarise(mean(x), min(x), sd(x))`
    - 집단 별로 요약하기 위해서는 `%>% group_by(g) %>% summarise(mean(x))` 등으로 쓸 수 있습니다. 이때 전체에 대해 요약한 것과 집단별로 요약한 것을 비교할 수 있습니다.
    - 예를 들어, 만약 `gender`열에 성별, `height`열에 키가 저장되어 있는 데이터 프레임 `df`가 있을 때, `df %>% summarise(mean(height))`는 전체에 대해서 키의 평균을 구합니다. 반면 `df %>% group_by(gender) %>% summarise(mean(height))`는 남자 따로, 여자 따로 키의 평균을 구합니다. 그리고 그 결과가 예를 들어 전체 평균이 170인데, 남자 평균이 175, 여자 평균이 165라면, 남자 평균은 전체 평균보다 5cm 크고, 여자 평균이 전체 평균보다 5cm 작음을 알 수 있습니다. 반면 남자 평균과 여자 평균이 모두 170으로 같았다면 남자 집단과 여자 집단이 서로 **균질한 집단**이라고 추정할 수 있습니다.
    - long-form의 data를 wide-form으로 바꿔보면 수업에서 얘기한 것처럼 결측값의 분포나 패턴을 눈으로 확인할 수 있습니다.
    - long-form과 wide-form으로 변환할 때 바뀌지 않는 부분에 주의하세요. 
    
예를 들어 어떤 사람의 키와 체중으로 wide-form(df01)으로 나타내면,

| 이름   	| 키  	| 체중 	|
|--------	|-----	|------	|
| 김한별 	| 180 	| 70   	|
| 김수정 	| 170 	| 60   	|
| 김도반 	| 155 	| 50   	|

이를 long-form(df02)으로 나타내면 다음과 같아집니다.

| 이름   	| 변수 	| 값  	|
|--------	|------	|-----	|
| 김한별 	| 키   	| 180 	|
| 김수정 	| 키   	| 170 	|
| 김도반 	| 키   	| 155 	|
| 김한별 	| 체중 	| 70  	|
| 김수정 	| 체중 	| 60  	|
| 김도반 	| 체중 	| 50  	|

이때 `df02 <- df01 %>% gather('변수', '값', 키:체중)`으로 wide-form을 long-form으로 바꿀 수 있습니다.

```
df01 <- data.frame(name = c('김한별', '김수정', '김도반'),
                   height = c(180,170,155),
                   weight = c(70,60,50))

df02 <- df01 %>% gather('변수', '값', height:weight)
```

| 순번 	| 문항01 	| 문항02 	| 문항03 	| 문항04 	| 문항05 	| 총점 	|
|------	|--------	|--------	|--------	|--------	|--------	|------	|
| 1    	| 1      	| 1      	| 1      	| 0.5    	| 0      	| 3.5  	|
| 3    	| 0.5    	| 0.5    	| 1      	| 0      	| 0      	| 2    	|
| 5    	| 1      	| 1      	| 1      	| 0.5    	| 0      	| 3.5  	|
| 6    	| 0      	| 0      	| 0      	| 0      	| 0      	| 0    	|
| 9    	| 1      	| 1      	| 0.5    	| 1      	| 0      	| 3.5  	|
| 11   	| 1      	| 1      	| 1      	| 0.5    	| 0      	| 3.5  	|
| 13   	| 1      	| 1      	| 1      	| 1     	| 0      	| 4    	|
| 15   	| 1      	| 1      	| 1      	| 1      	| 0      	| 4    	|
| 17   	| 1      	| 1      	| 1      	| 1      	| 0      	| 4    	|
| 19   	| 0      	| 0      	| 0      	| 0      	| 0      	| 0    	|
| 23   	| 1      	| 1      	| 1      	| 0.5    	| 0      	| 3.5  	|
| 25   	| 0.5    	| 0      	| 1      	| 1      	| 0      	| 2.5  	|
| 27   	| 1      	| 0.5    	| 0      	| 1      	| 0      	| 2.5  	|
| 28   	| 0.5    	| 0      	| 0      	| 0.5    	| 0      	| 1    	|
| 30   	| 0.5    	| 0      	| 0.5    	| 0      	| 0      	| 1    	|
| 31   	| 0      	| 0      	| 0      	| 0      	| 0      	| 0    	|
| 32   	| 1      	| 0      	| 1      	| 0      	| 0      	| 2    	|
| 34   	| 0.5    	| 0      	| 0.5    	| 0      	| 0      	| 1    	|
| 35   	| 1      	| 1      	| 1      	| 1      	| 0      	| 4    	|
| 36   	| 0      	| 0      	| 0      	| 0      	| 0      	| 0    	|
| 평균 	| 0.675  	| 0.5    	| 0.625  	| 0.45   	| 0      	| 2.25 	|

## **10월 2일 발표 관련 채점 기준**

- 데이터에 관해서 알려주세요. (30점)
	- 데이터에 흥미를 가지게 된 이유
	- 데이터와 관련된 배경 이론
	- 데이터를 통해 알고자 하는 내용
	- 데이터와 관련하여 특별한 가설이 있나요? 있다면 그런 가설을 가지된 배경 이론이나 개인적인 경험은 무엇인가요?

- 데이터 불러들이기 (10점)
	- 데이터를 불러들이는 과정을 보여주세요. 특히 예상치 못했던 문제점과 그것을 해결하는 과정을 보여주세요.
	- 최소한 2개 이상의 데이터를 불러들여서 `join`을 하세요.
	    - 만약 가능한 데이터가 없다면 `dat1 <- dat %>% select(id, height); dat2 <- dat %>% select(id, weight)` 등으로 만들어도 됩니다.
			
- 데이터를 살펴보는 과정 (20점)
	- `summary` 함수를 적용하세요. `summary` 함수를 적용하기 전에 각 컬럼을 적절한 데이터 타입으로 변형하세요(예. as.numeric, as.factor 등).
	- outlier의 존재을 확인하세요. outlier의 존재를 확인하기 위해 어떤 배경 지식을 사용했습니까? (예. 나이는 0보다 작을 수 없고, [131](http://news.donga.com/Main/3/all/20160114/75912015/1)보다 클 수도 없다.)
	    - outlier는 시각화를 통해서도 확인할 수 있습니다. 시각화를 통해 outlier의 유무를 확인하는 과정을 간략하게 보여주세요.
	- 다음의 플롯을 가장 간단한 방법으로 플롯하세요.(예. lattice의 시각화 방법) 그리고 가장 흥미로운 결과만 제시해 주세요.
		- 한 변수의 분포 시각화
		- 두 변수의 관계 시각화
		- 한 변수 분포의 조건부 시각화
		- 두 변수의 관계 조건부 시각화
	- 결측치의 양상을 확인하세요.		
	- 그 밖에 데이터를 어떤 식으로, 어떤 관점에서 살펴보았는지 알려주세요.
			
- 3개 이상의 잘 정리된 플롯을 최종 결과로 보여주세요. (40점)
    - 여러 가지 플롯의 예: [1](http://r-statistics.co/Top50-Ggplot2-Visualizations-MasterList-R-Code.html), [2](https://socviz.co/), [3](https://serialmentor.com/dataviz/)	
	- 하나 이상의 플롯은 `facet_grid` 혹은 `facet_wrap`을 활용하세요.
	- 하나 이상의 플롯은 color, fill의 경우 manual이나 palette를 활용하여 좀 더 보기 좋은 플롯을 만드세요.		
	- 이야기하고자 하는 데이터의 패턴을 가장 잘 보여줄 수 있는 시각화 방법을 사용하세요. 만약 책 [Fundamentals of Data Visualization](https://serialmentor.com/dataviz/index.html)([소스](https://github.com/clauswilke/dataviz))처럼 좋은 플롯과 바람직하지 못한 플롯을 동시에 비교할 수 있도록 한다면 가산점이 있습니다.
	- title, subtitle, caption, label, theme 등을 적절히 수정하여 가장 최상의 플롯을 보여주세요.
	- 시각화를 통해 알 수 있었던 사실, 혹은 뒷받침할 수 있었던 가설은 무엇인가요?
		
- github pull requests를 해주세요. 
  - 이때 너무 용량이 큰 데이터 화일은 commit하지 말고 인터넷에서 바로 다운 받을 수 있도록 한 후, .gitignore 화일에 화일을 추가하세요.  commit이나 push되는 것을 막을 수 있습니다. 자료 수집부터 데이터 가공, 시각화까지 최대한 script 안에서 실행되도록 하세요. 
  - 폴더명은 "Proj01_순번1_순번2__xxx"으로 해주세요. 예 12번과 17번 학생의 "야구 시각화"의 경우 "Proj01_12_17_야구"
  - 발표 자료는 기본적으로 R Markdown을 이용하세요.

- 마지막으로 최대한 창의성을 발휘하여 주세요(예를 들어 발표를 하기 전에 농담을 하나 던진다거나 청중의 참여를 이끈다거나 등). 가산점이 있습니다. (10점)

## 과제 04 공지(마감시간: 11-16 금 수업 시간)

* <http://data.princeton.edu/wws509/datasets/#salary>의 자료에서 예측변수 `yd`와 결과변수 `sl`로 선형회귀분석을 하세요. 
    - 계수를 추정하세요.
    - 계수의 95% 신뢰구간을 구하세요.
    - 데이터와 적합한 회귀선을 시각화하세요.
    - 선형회귀분석 결과에 대해 진단(diagnostics)하세요.
    
### 채점 결과

* 모두 수고했습니다.
* 회귀계수의 95% 신뢰구간은 `confint(lm(y~x))`로 구할 수 있으며 `t.test`와는 다릅니다.
* 선형회귀분석의 진단은 4가지 가정인 LINE이 성립하는지 확인하는 작업으로 `plot(lm(y~x))`으로 확인해 볼 수 있습니다.
    - 회귀선의 선형성 : 잔차의 분포는 설명변수에 따라 변하지 않고 $\mathbb{E}[r|X] =0$을 만족하는가?
    - 잔차의 정규성
    - 잔차의 등분산성
    - 마지막으로 이상점, 영향점의 존재 및 양상
* **선형회귀분석의 진단은 F-검정, p-값, 회귀계수의 유의미성과는 무관하며, 기본적으로 회귀분석의 가정이 성립할 때에만 그것을 가정하고 얻어진 결론(F-검정, p-값, 회귀계수의 신뢰 구간 등)이 의미가 있습니다.**

| 순번 	| 1 	|  2  	| 3 	|  4  	| 총점 	|
|:----:	|:-:	|:---:	|:-:	|:---:	|:----:	|
|   1  	| 1 	|  1  	| 1 	|  1  	|   4  	|
|   3  	| 1 	|  1  	| 1 	|  0  	|   3  	|
|   5  	| 1 	|  1  	| 1 	|  0  	|   3  	|
|   9  	| 1 	|  1  	| 1 	|  0  	|   3  	|
|  13  	| 1 	|  0  	| 1 	| 0.5 	|  2.5 	|
|  15  	| 1 	|  1  	| 1 	|  0  	|   3  	|
|  19   | 1   |  1    | 1   |  1    |   4   | 
|  23  	| 1 	|  1  	| 1 	|  0  	|   3  	|
|  25  	| 1 	|  1  	| 1 	|  1  	|   4  	|
|  27  	| 1 	| 0.5 	| 1 	| 0.5 	|   3  	|
|  28  	| 1 	|  1  	| 1 	|  0  	|   3  	|
|  30  	| 1 	|  1  	| 1 	|  1 	|  4 	|
|  31  	| 1 	|  1  	| 0.5 	|  0	|  2.5 	|
|  32  	| 1 	|  1  	| 1 	|  0  	|   3  	|
|  34  	| 1 	|  1  	| 1 	|  1 	|  4 	|
|  35  	| 1 	|  1  	| 1 	|  1  	|  4 	|
|  36  	| 1 	|  1  	| 1 	|  1  	|   4  	|
